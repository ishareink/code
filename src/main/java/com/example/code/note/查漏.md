### 值传递？

jqva中八大基本类型传递的时候为值传递，拷贝栈桢，本质上复制值，是值传递。

其他类型引用传递，因为他相当于拷贝了一个新的引用指向同一块堆内存，但是是片面的，比如传递一个User对象到一个新方法内部，然后我们把这个内部的User重新=new User一下，你会发现此时变成了两个，不是同一个了，如果是引用传递，此时应该是同时是同一个，因为引用传递的话只能初始化一次，在java都是都是在栈上做副本且不止可以初始化一次，所以都是值传递。而string是不可变类型，所以在方法内部对string变量赋值就相当于开辟了一块新的内存，使方法中拷贝的引用指向了新内存，退出方法后，原引用还是指向原来的那块内存。

### 为啥[mysql](https://www.wangt.cc/tag/mysql/)不用跳表

b+树一个节点可以存多个keyvalue结构，其他很多数据结构，一个节点就一个kv,比如红黑树；

跳跃表不适用于磁盘读取的场景，跳跃表的[查找](https://www.wangt.cc/tag/查找/)效率不如B+树效率高，也不如B+树稳定。

### 为啥[redis](https://www.wangt.cc/tag/redis/)不用平衡树

mysql用的B+树，是多叉树，有主键索引和二级索引，而跳表相对来说,从高到底，同key的指针大概是<层数的1/2,指针会比较少，所以跳表能更少的占用内存。并且redis相对mysql要考虑的事情太多，可能因为太复杂而没用B+树实现

### 延迟双删的缺点

1、等待时间难确定，过长不及时更新慢，用户体验不好且降低并发能力；等待时间过短，来不及更新读到旧值

2、删除缓存，如果此时读压力和写压力暴增，数据库可能被打挂

### 单体集群&分布式&SOA&微服务

**单体集群**：是同样的系统部署在多个服务器中，优点方便开发和部署，缺点是如果后续业务增涨速度快，迭代和维护困难

**分布式**：多个系统，部署在不同的服务器中，缺点是如果系统与系统之间存在共用某些数据，可能需要数据同步，就带来了数据冗余

>分布式需要做好事务管理
>
>分布式是以缩短单个任务的执行时间来提升效率的，而集群则是通过提高单位时间内执行的任务数来提升效率

**SOA**：将多个系统的共用的抽取出来，比如单点登录、订单系统，缺点是划分不够明显，管理关系复杂，这是因为对服务的拆分不够彻底

**微服务**：明确要彻底拆分成很小的服务。小到一个服务只对应一个单一的功能，小到这个服务可以单独部署运行。 各个微服务之间是松耦合的。带来的优点有很好的伸缩性，维护和扩容方便，缺点是开发和维护的成本高，服务之间可以通过 RPC 来相互交互。每个微服务都是由独立的小团队开发、测试、部署，上线，负责它的整个生命周期。

> 微服务和分布式不同的点在于部署方式不同
>
> 生产模式下微服务一定是分布式的，但是分布式部署应用不一定是微服务，因为他可能是SOA